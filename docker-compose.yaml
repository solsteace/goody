services:
  account:
    build:
      dockerfile: ./account/Dockerfile
      target: devel
    volumes:
      - ./account:/app/account
    ports:
      - 8880:8880
    environment:
      DB_URL: goodyapp:perhaps_i_should_try_this_one@tcp(account-db:3306)/goody?parseTime=true

  account-db:
    image: mariadb:lts-ubi9
    volumes:
      - account-vol:/var/lib/mysql
    environment:
      MARIADB_ROOT_PASSWORD: what_would_it_be_i_wonder
      MARIADB_USER: goodyapp
      MARIADB_PASSWORD: perhaps_i_should_try_this_one
      MARIADB_DATABASE: goody

  outlet:
    build:
      dockerfile: ./outlet/Dockerfile
      target: devel
    ports:
      - 8881:8880
    volumes:
      - ./outlet:/app/outlet

volumes:
  account-vol:

